<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Drive Clone">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#4285f4">
  <meta name="format-detection" content="telephone=no">
  <title>My Drive - Drive Clone</title>
  <link rel="stylesheet" href="/css/style.css?v=3">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìÅ</text></svg>">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìÅ</text></svg>">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Overlay (mobile) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <a href="/drive" class="logo">
          <svg viewBox="0 0 24 24" width="32" height="32">
            <path fill="#4285f4" d="M12 2L2 7l10 5 10-5-10-5z"/>
            <path fill="#34a853" d="M2 17l10 5 10-5"/>
            <path fill="#fbbc05" d="M2 7v10l10 5V12L2 7z"/>
            <path fill="#ea4335" d="M22 7v10l-10 5V12l10-5z"/>
          </svg>
          <h1>Drive Clone</h1>
        </a>
      </div>

      <div class="sidebar-actions">
        <button class="btn btn-new" id="btnNewSidebar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          New
        </button>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" id="navMyDrive" data-view="drive">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/>
          </svg>
          My Drive
        </a>
        <a href="#" class="nav-item" id="navRecent" data-view="recent">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
          </svg>
          Recent
        </a>
        <a href="/content-manager" class="nav-item" id="navContentManager">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/>
          </svg>
          Content Manager
        </a>
        <a href="/admin" class="nav-item" id="navAdmin" style="display: none;">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
          Admin Panel
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="storage-info">
          <div class="storage-bar">
            <div class="storage-bar-fill" id="storageBar" style="width: 0%"></div>
          </div>
          <div class="storage-text" id="storageText">Loading...</div>
        </div>
        <div class="user-info">
          <span class="user-name" id="userName">User</span>
          <button class="btn btn-icon" id="btnLogout" title="Logout">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="header">
        <button class="menu-toggle" id="menuToggle">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>

        <!-- Navigation Buttons -->
        <div class="nav-buttons">
          <button class="btn btn-icon" id="btnBack" title="Back" disabled>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>
          <button class="btn btn-icon" id="btnForward" title="Forward" disabled>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </button>
        </div>

        <!-- Current Path Display -->
        <div class="current-path" id="currentPath">
          <span class="path-label">Path:</span>
          <span class="path-text" id="pathText">/My Drive</span>
        </div>

        <div class="header-actions">
          <!-- Upload Button in Header -->
          <button class="btn btn-primary btn-upload-header" id="btnUploadHeader">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <span class="upload-text">Upload</span>
          </button>

          <button class="btn btn-icon" id="btnNewFolder" title="New Folder">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
              <line x1="12" y1="11" x2="12" y2="17"></line>
              <line x1="9" y1="14" x2="15" y2="14"></line>
            </svg>
          </button>

          <button class="btn btn-icon" id="btnRefresh" title="Refresh">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"></polyline>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
            </svg>
          </button>
        </div>
      </header>

      <!-- Breadcrumbs Bar -->
      <div class="breadcrumbs-bar" id="breadcrumbsBar">
        <div class="breadcrumbs" id="breadcrumbs">
          <a href="#" class="breadcrumb-item active" data-folder="">My Drive</a>
        </div>
      </div>

      <!-- Content Area -->
      <div class="content-area" id="contentArea">
        <div class="file-grid" id="fileGrid">
          <!-- Files and folders will be loaded here -->
        </div>

        <div class="empty-state" id="emptyState" style="display: none;">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          <h2 id="emptyTitle">This folder is empty</h2>
          <p id="emptyText">Drop files here or click "Upload" to add files</p>
        </div>
      </div>
    </main>
  </div>

  <!-- New Button Dropdown (Sidebar) -->
  <div class="dropdown" id="newDropdown">
    <div class="dropdown-menu" style="position: fixed;">
      <div class="dropdown-item" id="btnUploadFile">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>
        Upload File
      </div>
      <div class="dropdown-item" id="btnNewFolderDropdown">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          <line x1="12" y1="11" x2="12" y2="17"></line>
          <line x1="9" y1="14" x2="15" y2="14"></line>
        </svg>
        New Folder
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div class="context-menu" id="contextMenu">
    <div class="context-menu-item" data-action="preview">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
        <circle cx="12" cy="12" r="3"></circle>
      </svg>
      Preview
    </div>
    <div class="context-menu-item" data-action="download">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
      Download
    </div>
    <div class="context-menu-item" data-action="rename">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 20h9"></path>
        <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
      </svg>
      Rename
    </div>
    <div class="dropdown-divider"></div>
    <div class="context-menu-item danger" data-action="delete">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3 6 5 6 21 6"></polyline>
        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
      </svg>
      Delete
    </div>
  </div>

  <!-- Upload Modal -->
  <div class="modal-overlay" id="uploadModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Upload Files</h2>
        <button class="modal-close" id="closeUploadModal">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="dropzone" id="dropzone">
          <div class="dropzone-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
          </div>
          <div class="dropzone-text">
            Drag and drop files here or <strong>browse</strong>
          </div>
          <input type="file" id="fileInput" multiple style="display: none;">
        </div>
        <div class="upload-progress" id="uploadProgress"></div>
      </div>
    </div>
  </div>

  <!-- Folder Modal -->
  <div class="modal-overlay" id="folderModal">
    <div class="modal">
      <div class="modal-header">
        <h2>New Folder</h2>
        <button class="modal-close" id="closeFolderModal">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="folderName">Folder name</label>
          <input type="text" id="folderName" placeholder="Enter folder name">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelFolder">Cancel</button>
        <button class="btn btn-primary" id="createFolder">Create</button>
      </div>
    </div>
  </div>

  <!-- Rename Modal -->
  <div class="modal-overlay" id="renameModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Rename</h2>
        <button class="modal-close" id="closeRenameModal">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="newName">New name</label>
          <input type="text" id="newName" placeholder="Enter new name">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelRename">Cancel</button>
        <button class="btn btn-primary" id="confirmRename">Rename</button>
      </div>
    </div>
  </div>

  <!-- Preview Modal -->
  <div class="modal-overlay preview-modal-overlay" id="previewModal">
    <div class="preview-modal">
      <div class="preview-header">
        <div class="preview-title" id="previewTitle">Preview</div>
        <div class="preview-actions">
          <button class="btn btn-icon" id="previewDownload" title="Download">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </button>
          <button class="btn btn-icon" id="closePreview" title="Close">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>
      <div class="preview-body" id="previewBody">
        <!-- Preview content will be loaded here -->
      </div>
      <div class="preview-footer">
        <button class="btn btn-secondary" id="previewPrev" title="Previous">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
          Previous
        </button>
        <span class="preview-counter" id="previewCounter">1 / 1</span>
        <button class="btn btn-secondary" id="previewNext" title="Next">
          Next
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Upload Progress Container -->
  <div class="upload-progress-container" id="uploadProgressContainer" style="display: none;">
    <div class="upload-progress-header">
      <span>Uploading...</span>
    </div>
    <div class="upload-progress-list" id="uploadProgressList"></div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Hidden file input for header upload -->
  <input type="file" id="fileInputHeader" multiple style="display: none;">

  <script src="/js/drive.js?v=4"></script>
</body>
</html>
